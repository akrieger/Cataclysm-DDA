# The DDA Development Process

**A guide for new and prospective contributors, or just for people curious about how the devs understand the project to work.**

This guide is intended to describe how the Cataclysm: Dark Days Ahead project is organized, and hopefully in the process, clear up common rumours and misconceptions about how it all works.  In this document the term "we" is intended to mean "Cleverraven as an organization", and does not necessarily reflect the individual opinions of anyone in Cleverraven, as individuals are welcome to disagree with the team stance.

This document assumes you have a basic understanding how GitHub works.  Please see the [guide for new contributors](https://github.com/CleverRaven/Cataclysm-DDA/wiki/Guide-to-adding-new-content-to-CDDA-for-first-time-contributors) for more info there.  You might also find helpful information in the [Frequently Made Suggestions doc](https://docs.cataclysmdda.org/FREQUENTLY_MADE_SUGGESTIONS.html), which talks about some of the common ideas we hear for the project and offers reasons about why they might not have been added yet.  [This guide from GitHub](https://opensource.guide/how-to-contribute/#anatomy-of-an-open-source-project) also gives a decent run-down of the basic structure of any open source project.

## The basic concept 

At its core, CDDA is a survival simulation game.  [The design doc outlines what we mean by this](https://docs.cataclysmdda.org/Lore/design-doc.html).  The project is led by Kevin Granade, who owns the Cleverraven group that runs this branch of the code.  We (as in, all the members of the development team) often have different ideas of what's fun or good, and we put those things in our own mods (eg Aftershock, Magiclysm, and Dark Days of the Dead) if we can't work them into the main game. As lead developer, Kevin's main job in the project is to be the *last word* if one is needed.  Most of the time, we don't need his final arbitration to know if something is going to fit or not.  He tends to have stronger opinions about the infrastructure of the project, as one might expect from a software engineer working for more than a decade on a single massive open-source project.

## Helpful tips for prospective contributors

This section is going to be super long, and you're welcome to read it all if you like, but here's the most important TL;DR points:

1.  Most simple, reasonable contributions get accepted.  For larger projects, you might want to get more experience with the project or clear it with a developer first.
2.  If it sounds like your small job is being turned into a big unmanageable job, check if the ideas being thrown around are things *you* have to do, or just people getting excited.  Usually it's just excitement, it means you have a cool idea but not that you need to do a bunch more stuff.
3.  If you're getting negative feedback or being told you have to do something a certain way, make sure it's someone with authority before you start feeling discouraged.
4.  Please don't take it personally if a developer gives you a short, gruff answer.  Tone doesn't convey well in text, but the intent is to be completely clear and matter-of-fact, not to be unkind.

### What if my contributions aren't accepted?

If what you're doing is simple, like fixing typos, chances are you don't need to worry.  If you're new to the project and have big ideas for what you want to add, though, we strongly recommend you first discuss these with someone higher up in the project.  There are two good ways to do that: either create an Issue post on GitHub, or chat in [the developer discord](https://discord.gg/hqWgHC8TKY) in the Development or CDDA-Discussion channel about your ideas.  The larger the project you plan to add, the more important it is to check in first.  That isn't to say big things can't get in without prior approval - it happens all the time - but it's always a bigger risk, especially if you're new to the project.

By and large, most PRs do get accepted.  If you are the sort of person who won't really mind if you do some work and find it's going to have to go back to the drawing board, you can basically skip this entire document.  You'll be fine.  It's already a small minority of things that turn out to not work out and need to be re-thought, and if you're easygoing about that risk then you have nothing to worry about.  If that possibility concerns you though, reading on may help you to figure out how to limit the risk of creating something only to find it won't get in, or needs a lot more work than you thought.

If you've created an Issue and aren't getting much feedback, try reaching out on Discord as a good second measure.  Be patient and give us time to spot you, but don't be afraid to be persistent.  Due to the high activity on the project, stuff often slips beneath people's radars.  That doesn't mean we're not interested in what you've got.  It's just a side effect of it being a volunteer project where all of us have limited time to devote.

#### What if different people have different opinions of my idea?

The ultimate authority is Kevin Granade, as project lead.  After him, the developers (green and gold names on discord) are the best ones to listen to, such as I-am-Erk, KorgGent, esotericist, Venera3, Candlebury, Renech, and more.  After that, people with blue or magenta names on discord (the collaborators and moderators) often have a very good idea, and you should listen carefully to their feedback.  Anyone else can of course offer an opinion, and often have great information, but take it with a grain of salt, especially if it conflicts with the above.  We often get well-meaning people speaking with confidence about elements of the project they don't fully understand yet.

On GitHub it can be a little harder to tell who is who, and we don't really have a way around that.  If you see somebody merging PRs, closing issue posts, or adding labels to issues and PRs though, that's a person who probably has a higher level of trust in the project.  There's also a "member" badge on the upper right of github posts that indicates a person is a member of Cleverraven with at least a little authority, like this:
![image](https://gist.github.com/assets/45136638/a0131586-a61f-4186-bd1f-01e8228cfd1c)

If a person has a "member" badge there, it usually means they speak with some authority.  However, we all have different areas of the project we know better than others, so if a member of cleverraven says something like "I don't know much about armpit code, but maybe you want to do X", they're trying to tell you not to take their word too seriously.

#### My idea was rejected, changed beyond recognition, or requires a lot more than I expected.

This can happen for a few reasons.  If you're not sure which applies to you, feel free to ask for clarification.

* Sometimes, your idea sparks a huge conversation, and the next thing you know it seems like you're on the hook to overhaul armpit f
mechanics before you can start.  *Please, feel free to mention if you feel this way*.  This usually means you've hit something cool that we're all excited about.  It often doesn't mean we expect you to add whatever we've started riffing on, and you're fine to just put in whatever small thing you originally wanted.  We're all just huge nerds, and we know that sometimes we get carried away.
* Sometimes, what you want to add seems simple, but the simple solution has already been rejected because of complex flaws.  Often it's better not to add a simplified version that will cause us problems down the road, because we then need to either revert or rework that solution to go on.  If you're not able to do the harder work, you'll have to find a different idea.  We won't think less of you for that.
* Sometimes, what you want just isn't compatible with the core game.  It might go fine in a mod, and it might even [be fine to include that mod in the main repository](https://github.com/CleverRaven/Cataclysm-DDA/blob/master/doc/IN_REPO_MODS.md) depending on what it is.  Remember that almost all the senior devs have our own pet mods; sometimes, things just go better there, and that's okay.

An issue we run into occasionally is that our responses to ideas we've heard a lot of times before can be short and blunt, which can rub people the wrong way.  The intent is to be matter-of-fact and completely clear.  We have found that if we try to be *too gentle*, we leave room for confusion: people continue working on a thing that will never be OK to add, and wind up wasting more of their effort, which is a really bad outcome.  Remember that, first, text doesn't convey tone well; second, we've often had this conversation twenty times already and don't want to make it seem open to debate; and third, we're all the sort of people who choose to program a complex niche game *as a hobby*.  We're not all the most, um, socially skilled people.  However, we can guarantee that nobody wants you to feel badly for having ideas and excitement about the game.  We just cannot always be there to meet you equally.

#### I've heard a lot of things get merged to the project, then reverted.

This is a thing that happens sometimes; because it's a rare and significant event, it often gets a bit of publicity and seems like something that happens a lot.  At time of writing there have been roughly 1-2 reversions per month in the last year, which is around 0.2% of the PRs merged.  Most of these are reverted for infrastructure reasons, and added back as soon as possible.  For example, a PR might be reverted because the code has unforseen consequences that create bugs that will be very hard to fix; or, it might have attribution errors.  It's very important to understand that on our end, **we consider reversions a failure of the dev team**.  They aren't your fault as a contributor: if something is getting reverted it's because we failed to properly review it.  They don't mean that your contributions aren't valued.  They mean that we messed up and we're fixing it as best we can.  The fact that it got merged in the first place often means that it's appropriate to the game, but we strongly advise not working on it further until you've confirmed that.

The best way to protect yourself from getting something reverted, or rejected before merge, is to (1) discuss your project on github or discord with developers and make sure it's appropriate, (2) [get someone to review your PR before it's merged]([https://github.com/CleverRaven/Cataclysm-DDA/blob/master/doc/reviewing_PR_guide.md](https://docs.cataclysmdda.org/reviewing_PR_guide.html)), and (3) keep your changes to individually small PRs where they can be properly reviewed and studied before being added.  However, remember that by far most PRs are not reverted nor rejected.

#### I've started a PR and now I'm getting a ton of requested changes.

Sometimes, this is just a consequence of learning the system.  GitHub is hard to use, and our code is complex and messy.  If you're feeling overwhelmed by the amount of work being piled on you, first, we recommend making sure the suggestions are coming from someone with some authority on the matter.  When in doubt, these issues are easiest to sort out on discord, where it's easier to tell who has some authority with cleverraven.  On GitHub, it can be tougher to tell who's in charge; this is just a fundamental flaw with how the site works, and there's no easy way around it.  We're doing our best to make sure that more senior project members get a user badge, like this:
![image](https://gist.github.com/assets/45136638/a0131586-a61f-4186-bd1f-01e8228cfd1c)

A "member" badge means this person has permissions with cleverraven and so has a pretty high chance of being correct, but remember that if they say they're not an authority in this area, that means you shouldn't overvalue them either.  A "contributor" badge means they've worked with the project before, but don't have any official authority.  As a last resort, consider pinging kevingranade or i_am_erk on github to come in and clarify, although we'd very much prefer you to come ask in discord.

If the requested changes are coming from a trusted source, and it's more than you feel you can handle, it's all right to say as much.  Just as mentioned above, **this may be the result of enthusiasm** and we might be able to meet you halfway, or we might not even mean that *you* have to do whatever is being suggested.  Other times, it's simply that the thing you're trying to do is not going to be as easy as it looked.  In that case, we'd generally prefer you to do it if you can, but it's all right to decide that we're asking for too much, and to step away from the PR.  These problems can *usually* be avoided with a well-discussed Issue post or discord conversation, but there's no way to completely guarantee that the right eyes are going to see your thread in time.  If you're extremely averse to having this happen, the most surefire way to avoid it is to be patient and make sure you've got the go-ahead from a developer before beginning, but we want to emphasize that *most of the time, this doesn't happen*.  It's a very small minority of PRs that become complex issues needing a lot of management and discussion like this, chances are whatever you want to add is just fine and you don't need to be too stressed about getting a green light.

#### You keep suggesting the discord, but I've heard it's really strict.

We don't think so, but obviously we're biased.  First, make sure you're looking at [the developer discord](https://discord.gg/hqWgHC8TKY) and not the fan discord or the old one that was subjected to a nazi takeover (seriously).

If you're on the developer discord to talk about development, it's very difficult to get banned or kicked out.  If you're worried about getting in trouble for your memes or fun chat times, we suggest just going to [the community discord](https://discord.gg/byxwnAU
), where the rules are much more lax.  It's still fine to chat on the developer discord, but we intentionally run it mainly for very focused discussion of the game, it's not the place to go for memes about cargo socks.  It *is* the place to go to see the devs talking like normal people instead of giving dry technical responses on GH.

If someone is telling you they got banned from "devcord" for nothing at all without warning, there's a story they aren't telling you.  This just isn't a thing that happens.  Our ban records are public.

### How does player feedback affect the project's development?

There's a common misunderstanding about the role of non-contributor players, or even non-dev contributors, in affecting the project direction, which is that we don't care about player feedback.  It's not entirely false, and it's definitely not true; it should not be a reason to decide not to contribute.  First, if *you* want to listen to player feedback on your additions to the game, you're welcome to do it as much as you like!  However, the question of what we think of player feedback on the project side is actually pretty complex and easy to misunderstand.  It's worth going into detail if you're interested.

#### Do we care about the players?

The short answer is, *yes, of course*, but this doesn't mean what some people might think.

1.  We are not selling a product, so we don't care about mass appeal.  In fact, in some ways, the more popular DDA gets the more trouble it causes from a project management standpoint: we get more drama and have to handle more top-heavy admin work than we would with a smaller project.  "Growing our audience" is something that has happened organically, and we love new people trying out the game, but at the same time it's definitely not a *goal*.
2.  We already know what game we want, and it's not for everyone.  However, we all play this game and love it.  Nothing we add ever has the goal of making a game we wouldn't like to play ourselves.  Any player feedback that amounts to "change this aspect of the game that you, the devs, like into something I prefer" is just a non-starter.  We know that sometimes what you prefer has more mass appeal.  See number 1.  We also don't think this mass appeal is anywhere near as obvious as it can seem from inside a drama thread.
3.  This game is one of the most adjustable and moddable games out there, but that's an outcome of good data driven design, not a goal we have.  When it's possible to do it without extra work, we're happy to keep things set as options that can be adjusted with mods, especially since most of the devs also have our own mods.  However, including player-facing adjustments for every conceivable game setting is not something we want to maintain.  We could write four paragraphs explaining why not, but in the end, it comes down to number 2 plus a bunch of details on managing the code.
4.  Many times, player feedback concerns come down to the playability of the experimental branch of the game.  We try to keep the experimental branch of the game playable, of course, but it's not intended to represent the curated CDDA experience: experimental is often rendered very weird and imbalanced, sometimes for months at a time, as we *experiment* with things.  We often allow trusted contributors to mess something up just to see what happens, or to put in a partially complete project in order to collect data on what's needed for the next phase.  Not everyone likes being a guinea pig!  That's fine!  That's why we try to put out a stable every year or two.  People can also choose to play snapshots of experimental from before certain changes went in.  We will basically never revert changes to experimental that we've added in order to test them, nor are we likely to relegate those changes to a mod or an option when requested.  See 2 and 3.  However, nearly all the time, whatever is bothering players about current experimental is something that will shake out and become sorted in time.  In years of working on the project, we've seen it happen dozens upon dozens of times, and play out the same way every time.  This is one of many things that can make player feedback difficult to properly assess.
5.  The project isn't a democracy.  This rubs some folks the wrong way, but it just isn't.  However, the project also isn't a dictatorship, it's more like an open forum with a moderator.  If you have opinions about something, make your case for it.  The general design is quite flexible, and for example when Venera3 started contributing, we were considering removing giant insects from the lore entirely.  Now we all have to deal with those infuriating giant wasps and it's all his fault.  If what you want doesn't conflict with the game design, and you make a good case for it, you can very often change our minds.

We feel pretty strongly that the reason this project has thrived for so long is that we have a consistent and uncompromised vision for the game that we follow, while also allowing side projects and flavour tweaks to be part of mainline.  It's fine if you don't agree with what we want.  There are a few ways to reconcile that: you could work on a mod in mainline, either your own or someone else's.  You could develop and share a third-party mod that we haven't got any control over at all.  You could join a fork like Bright Nights, and help them out.  You could fork the project and demonstrate your own vision for it.  The ability to go your own way if you disagree is one of the strongest assets we have, it's not a problem if you want to do your own thing.  A healthy open-source project should have a few good forks.  However, if you've looked around and you like where we're going, we'd love to have you join us, or even just play and have fun with our game.

##### So wait, it sounds like you're just going to do whatever you want and you don't care what the players say.

If you took that away from the above, and a few people definitely did, we'll probably never see eye-to-eye.  However, we do actually care what players say.  We all love talking to the players.  Seriously, we do, that's why we do so much of it.  Players, even players who never have and never will contribute directly to the game, have *wildly* altered the course of DDA's development in countless ways.  It's just that this has not, and never will, manifest in Kevin deciding to shift design goals because a bunch of people angrily demanded it.  Very often, constructive discussion with players manifests in our overall *goals* remaining the same, but us reaching a new agreement in *how to reach those goals*.  Sometimes, of course, we will listen to many well-reasoned arguments from intelligent and passionate people, and still not change our minds.  That is, of course, because 'listening' and 'caring about what you say' is not the same as 'doing what we're told to do'.  We've learned over the years that for some, this is not going to be sufficient, and again, we encourage those people to find ways to see their own goals achieved rather than continuing to be upset at us for not changing our own.

## Supplemental Material

This section isn't necessary to read, but contains (we hope) some useful fact-checking and some fun or interesting history.

### A Very Brief History of DDA

CDDA is a fork of a game called Cataclysm, developed by a guy called Whales.  Cataclysm was a grab-bag apocalypse roguelike set in a vague near-future setting.  Dark Days Ahead was forked by a group of people (Kevin Granade, TheDarklingWolf, and GlyphGryph) who wanted a more gritty, realistic zombie apocalypse game made from the same general concept.  Why they picked Cataclysm is anyone's guess (Kevin could probably guess, but he's not writing this document).

We firmly believe that the reason CDDA has persevered and improved steadily since 2013 is that it has a consistent project direction.  We're also aware that many people claim the project direction changed at some point in the past.  [This interview from 2013](https://web.archive.org/web/20140211144953/http://www.jacehallshow.com/news/gaming/preview/20130626/ascii-goodness-living-breathing-3d-world-cataclysm-dark-days/) and [this one from about the same time](http://www.roguelikeradio.com/2013/07/episode-75-cataclysm-dark-days-ahead.html?m=1) show that the original developer team had much the same goals as we currently have in the design doc.  A lot of the misconception comes down to changes that were left to ride from the original Cataclysm before the DDA fork, and were removed in a dedicated push around 2018-2020.

To clear up a few common rumours that circulate in certain channels:
- Kevin did not steal the project from anyone.  The other original devs just left, for various reasons.  It's a hobby project, people come and go.  There was no falling out or hard feelings.
- Over the years we've lost a lot of developers.  The reason is not as dramatic as you might think: by and large, people get bored and move on to other places.  The number of major fallings-out can be counted on one hand, in over a decade of development.
- We didn't start a developer discord because of some secret community drama.  We just needed a place we could moderate for a focused discussion.  Community drama followed shortly afterwards, but not for related reasons.
- That's also the same reason we started a developer-focused subreddit: we wanted a place where we could keep the discussion focused just on game dev and projects related to it, rather than fun and memes.  It wasn't closed because of any internal strife, it was closed because we all used apps to moderate it, and reddit shut down 3rd party apps.  Nothing particularly exciting.
- We don't have any animosity to the other major forks of the game.  Mostly, we are glad they exist, even though we know how some of them talk about us.  It's our opinion that it's a *good thing* if someone who doesn't like our way of managing the project has a different place to go.  We don't want to be dictators of our tiny corner of the internet, we want to make a neat game with as little drama as possible.

#### Why did Kevin do this to me?

This merits its own section because it's such a frequent by-line in various Cataclysm communities.  For the most part, for the last five or six years, Kevin has been fairly hands-off in the direct development of CDDA.  He is quite present and involved in a lot of design discussions, and he has his own ongoing code projects, but for some reason he is attributed as the primary source of all changes in Cataclysm.  We know this is a meme, but it's actually one that we consider harmful, since it obscures credit from our extremely broad base of contributors.  As mentioned earlier in this document, Kevin is the *final voice* in what goes in to the project or does not.  However, his powers are otherwise quite limited.  In particular, it's helpful to understand that neither the devs, nor Kevin, have any "additive" influence.  Unless we put something in ourselves, we have no way to influence other people to add it besides to ask nicely.  If a feature was added to the game, chances are actually pretty high that someone else did it.  At any given time there are around 50-100 different contributors of various levels working on the project, including both regulars and new faces.  If something was changed, statistically it's most likely one of these people, not Kevin, changed it, and Kevin simply didn't say 'no'.

### Realism as a design goal

This is a much repeated buzz word.  Any prospective contributor should understand that we do not consider realism to be the goal of the design.  Rather, we are aiming for *verisimilitude*.  That is to say, most of the time, things should work the way you would expect them to work.  This is a subtle but very important difference.  Many things that would be more realistic may be nixed because of problems with play experience or play balance; for example, at time of writing, we've repeatedly shot down efforts that would make regular laundry and hygeine important, because while realistic these would be tedious and frustrating unless implemented in extremely specific ways.  You can find a lot more detail about this in [the design document](https://docs.cataclysmdda.org/Lore/design-balance.html).

In general, the most common citation of "realism" online comes from laughable misunderstandings where glitches in experimental are mistaken for intended design in certain communities.  AN example was when `charges` were being removed as a part of a major *code infrastructure change* with no intended player impact at all.  This caused several months of shakedown with glitches like players having to move salt in individual pinches, an obviously unintended consequence that was remedied pretty quickly.  This was frequently claimed to be a "realism change", not a bug, in certain circles.  While funny to think back on, this attitude has at times been actively harmful to the project, with people feeling discouraged from fixing bugs because they get the impression it's intended play.  Almost universally, if someone has said that a seemingly hostile and illogical game mechanic is the way it is due to "realism", they're probably wrong, either because the mechanic is bugged or because QoL improvements are desired to make it less frustrating.

### Why did X system get worked on while the more important Y system didn't?

Short answer: Because someone chose to work on X, not Y.

Longer answer: Sometimes, the more important system is much harder or more intimidating (eg NPC AI).  Most of the time, though, it's just that we have infinite possible things to work on and we have to pick something.  If a particular system is important and interesting to you, the only way to *ensure* someone works on it is to learn how to code and to work on it yourself.  Chances are this is not as difficult as it sounds.  However, if you just can't do that for some reason, sometimes you can get headway by becoming a cheerleader for it.  Learn what needs to be done, and make it sound appealing to people who might know how to do it.  Generally, this isn't going to work well unless you also contribute your own stuff, but for example a dedicated tileset artist might have a lot of sway in convincing a coder to do them a favour.

## The Bottom Line

Did you actually read all that, or just scroll down?  Massive kudos if you read it.

In the end, we hope you'll share our passion for this project and decide to come join us in contributing to it, and we hope that you find this document helpful in clearing up various odd misconceptions about how development works that have gathered over all the years of project management.
