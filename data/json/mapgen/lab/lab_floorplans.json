[
  {
    "//": "collapsed hallway",
    "type": "mapgen",
    "method": "json",
    "om_terrain": [ "lab_1side" ],
    "weight": 100,
    "object": {
      "fill_ter": "t_rock_floor",
      "rows": [
        "|----------++----------|",
        "|         |..|         |",
        "|         |..|         |",
        "|         |..|         |",
        "|         |..|         |",
        "|         +..+         |",
        "|         |..|         |",
        "|         |..|         |",
        "|         |..|         |",
        "|         |..|         |",
        "|---------|..|---------|",
        "#####^^..............^##",
        "#######^...........^^###",
        "#####-----|..|--------##",
        "###^^^....|..|##########",
        "|#^.......|..|##########",
        "|^........|..|##########",
        "|.........|..|##########",
        "|^........+.^###########",
        "##^^...^^^|^############",
        "###^^.^^^###############",
        "########################",
        "########################",
        "########################"
      ],
      "palettes": [
        "lab_palette"
      ],
      "furniture": {
        "^": "f_rubble"
      },
      "terrain": {
        "^": "t_rock_floor"
      },
      "place_nested": [
        { "chunks": [ "lab_spawn_9x9_crossdoors" ], "x": 1, "y": 1 },
        { "chunks": [ "lab_spawn_9x9_crossdoors" ], "x": 14, "y": 1 }
      ]
    }
  },
  {
    "//": "military bunker, smashed by a hulk. TODO: make hulk smash a variant, add weight, remove hardcoded version.",
    "type": "mapgen",
    "method": "json",
    "om_terrain": [ "lab_1side" ],
    "weight": 50,
    "object": {
      "fill_ter": "t_floor_blue",
      "rows": [
        "|--|--|--|-..-|--|-----|",
        "|bb|bb|bb|....|,,|l,,,b|",
        "|,,|,,|,,|...6|,,+,,,,b|",
        "|l,|l,|l,|....|,,|-----|",
        "|-+|-+|-+|-^D-|,,|l,,,b|",
        "|,,,,,,,,,,,,x,,,+,,,,b|",
        "|,,,,,,,,,,,,,,,,|-----|",
        "|--+-|,,,,,,,,,,,|l,,,b|",
        "|S,,,|,,,,,,,,,,,+,,,,b|",
        "|S,,,|D--|,,,,,,,|-----|",
        "|,,,,|,,cg,,,,,,,|,,,,l|",
        "|+|+-|,h7g,,,,,,,+,h,,b|",
        "|T|,T|,,cg,,,,,,,|ddd,b|",
        "|-|--|+--|-D^----|-----|",
        "|,rrr,,,,,,,,,,rrrrrr,,|",
        "|,,,,,,,,,,,,,,,,,,,,,,|",
        "|,,,,,,,,,,,,,,,,,,,,,,|",
        "|r,,rr,,rr,,,,rr,,rr,,r|",
        "|r,,rr,,rr,,,,rr,,rr,,r|",
        "|r,,rr,,rr,,,,rr,,rr,,r|",
        "|r,,rr,,rr,,,,rr,,rr,,r|",
        "|r,,rr,,rr,,,,rr,,rr,,r|",
        "|r,,,,,,,,,,,,,,,,,,,,r|",
        "|----------------------|"
      ],
      "palettes": [
        "lab_palette"
      ],
      "place_monsters": [ { "monster": "GROUP_MAYBE_MIL", "x": [ 1, 22 ], "y": [ 1, 22 ], "density": 0.1 } ],
      "place_monster": [
        { "monster": "mon_zombie_bio_op", "x": [ 1, 22 ], "y": [ 1, 16 ], "chance": 25 },
        { "monster": "mon_zombie_grenadier", "x": [ 1, 22 ], "y": [ 1, 16 ], "chance": 25 },
        { "monster": "mon_zombie_hulk", "x": [ 11, 12 ], "y": [ 6, 22 ], "chance": 90 }
      ],
      "furniture": {
        "^": "f_rubble"
      },
      "terrain": {
        "^": "t_floor_blue",
        "7": "t_console"
      },
      "place_items": [
        { "item": "building_rubble", "x": 11, "y": 4, "chance": 100 },
        { "item": "building_rubble", "x": 12, "y": 13, "chance": 100 }
      ],
      "mapping": {
        "l": {
          "items": [
            { "item": "clothing_soldier_set", "chance": 100 },
            { "item": "gear_soldier_sidearm", "chance": 33},
            { "item": "book_military", "chance": 33}
          ]
        },
        "b": {
          "items": [ { "item": "bed", "chance": 50 } ]
        },
        "d": {
          "items": [ { "item": "office", "chance": 50 } ]
        },
        "^": {
          "items": [ { "item": "building_rubble", "chance": 100, "repeat": 2 } ]
        },
        "r": {
          "items": [
            { "item": "military", "chance": 10 },
            { "item": "ammo_milspec", "chance": 10},
            { "item": "mags_milspec", "chance": 10},
            { "item": "guns_milspec", "chance": 10}
          ]
        }
      },
      "computers": {
        "6": {
          "name": "Barracks Entrance", "security": 4, "options": [ { "name": "UNLOCK ENTRANCE", "action": "unlock", "security": 6 } ], "failures": [
            { "action": "damage" },
            { "action": "shutdown" }
          ]
        },
        "7": {
          "name": "Magazine Entrance", "security": 6, "options": [ { "name": "UNLOCK ENTRANCE", "action": "unlock", "security": 7 } ], "failures": [
            { "action": "damage" },
            { "action": "shutdown" }
          ]
        }
      }
    }
  },
  {
    "type": "mapgen",
    "method": "json",
    "om_terrain": [ "lab_4side" ],
    "weight": 50,
    "object": {
      "fill_ter": "t_rock_floor",
      "rows": [
        "          |..|         |",
        "          |..|         |",
        "          |..|         |",
        "          |..|         |",
        "          |..|         |",
        "          +..|         |",
        "          |..|         |",
        "          |..|         |",
        "          |..|         |",
        "          |..|         |",
        "----------|..|----+----|",
        ".......................+",
        ".......................+",
        "-----+----|..|---------|",
        "          |..|         |",
        "          |..|         |",
        "          |..|         |",
        "          |..|         |",
        "          |..+         |",
        "          |..|         |",
        "          |..|         |",
        "          |..|         |",
        "          |..|         |",
        "-----------++----------|"
      ],
      "palettes": [
        "lab_palette"
      ],
      "place_nested": [
        { "chunks": [ "lab_spawn_9x9" ], "x": [0, 1], "y": [0, 1] },
        { "chunks": [ "lab_spawn_9x9" ], "x": 14, "y": [0,1] },
        { "chunks": [ "lab_spawn_9x9" ], "x": [0,1], "y": 14 },
        { "chunks": [ "lab_spawn_9x9_crossdoors" ], "x": 14, "y": 14 },
        { "chunks": [ "lab_border_walls" ], "x": 0, "y": 0 }
      ]
    }
  },
  {
    "type": "mapgen",
    "method": "json",
    "om_terrain": [ "lab_4side" ],
    "weight": 100,
    "object": {
      "fill_ter": "t_rock_floor",
      "rows": [
        "       |       |       |",
        "       |       |       |",
        "       |       |       |",
        "       +       +       |",
        "       |       |       |",
        "       |       |       |",
        "       |       |       |",
        "---?---|---?---|---+---|",
        "       |       |       |",
        "       |       |       |",
        "       |       |       |",
        "       ?       +       +",
        "       |       |       +",
        "       |       |       |",
        "       |       |       |",
        "---+---|---+---|---?---|",
        "       |       |       |",
        "       |       |       |",
        "       |       |       |",
        "       +       +       |",
        "       |       |       |",
        "       |       |       |",
        "       |       |       |",
        "-----------++----------|"
      ],
      "palettes": [
        "lab_palette"
      ],
      "terrain": {
        "?": [ "t_concrete_wall", "t_door_metal_c", "t_door_metal_c"]
      },
      "place_nested": [
        { "chunks": [ "lab_spawn_7x7_crossdoors" ], "x": 0, "y": 0 },
        { "chunks": [ "lab_spawn_7x7" ], "x": 0, "y": 8 },
        { "chunks": [ "lab_spawn_7x7_crossdoors" ], "x": 0, "y": 16 },
        { "chunks": [ "lab_spawn_7x7" ], "x": 8, "y": 0 },
        { "chunks": [ "lab_spawn_7x7_crossdoors" ], "x": 8, "y": 8 },
        { "chunks": [ "lab_spawn_7x7" ], "x": 8, "y": 16 },
        { "chunks": [ "lab_spawn_7x7_crossdoors" ], "x": 16, "y": 0 },
        { "chunks": [ "lab_spawn_7x7" ], "x": 16, "y": 8 },
        { "chunks": [ "lab_spawn_7x7_crossdoors" ], "x": 16, "y": 16 },
        { "chunks": [ "lab_border_walls" ], "x": 0, "y": 0 }
      ]
    }
  },
  {
    "type": "mapgen",
    "method": "json",
    "om_terrain": [ "lab_4side" ],
    "weight": 100,
    "object": {
      "fill_ter": "t_rock_floor",
      "rows": [
        "...............|.cccccX|",
        "...............+......X|",
        "...HtH...HtH...|-------|",
        "..-----+-----..|       |",
        "..|         |..|       |",
        "..|         |..|       |",
        "..|         |..+       |",
        "..|         |..|       |",
        "..?         ?..|       |",
        "..|         |..|       |",
        "..|         |..----?---|",
        "..|         |..........+",
        "..|         |..........+",
        "-?-----?-----..----+---|",
        "          |....|       |",
        "          |....|       |",
        "          |..|-|       |",
        "          |..|f|       |",
        "          +..+.|       |",
        "          |..|-|       |",
        "          |..|T|       |",
        "          |..+.|---+---|",
        "          |..|S|X.....X|",
        "-----------++----------|"
      ],
      "palettes": [
        "lab_palette", "lab_loot_generic"
      ],
      "furniture": {
        "H": [ "f_armchair" ]
      },
      "terrain": {
        "?": [ "t_concrete_wall", "t_concrete_wall", "t_door_metal_c" ]
      },
      "mapping": {
        "t": {
          "items": [
            { "item": "textbooks", "chance": 5 },
            { "item": "magazines", "chance": 3 }
          ]
        }
      },
      "place_nested": [
        { "chunks": [ "lab_spawn_9x9_crossdoors" ], "x": 3, "y": 4 },
        { "chunks": [ "lab_spawn_9x9" ], "x": [0,1], "y": 14 },
        { "chunks": [ "lab_spawn_7x7_crossdoors" ], "x": 16, "y": 3 },
        { "chunks": [ "lab_spawn_7x7_crossdoors" ], "x": 16, "y": 14 },
        { "chunks": [ "lab_border_walls" ], "x": 0, "y": 0 }
      ]
    }
  },
  {
    "type": "mapgen",
    "method": "json",
    "om_terrain": [ "lab_4side" ],
    "weight": 100,
    "object": {
      "fill_ter": "t_rock_floor",
      "rows": [
        ".......................|",
        ".......................|",
        "....----?-------+----..|",
        "..hh|       |       |..|",
        "..tt|       |       |..|",
        "..hh|       |       |..|",
        "....?       ?       ?..|",
        "..hh|       |       |..|",
        "..tt|       |       |..|",
        "..hh|       |       |..|",
        "....----+-|---------|..|",
        "....+....f|         |..+",
        "..|---+---|         |..+",
        "..|       |         |..|",
        "..|       |         |..|",
        "..|       |         +..|",
        "..?       |         |..|",
        "..|       |         |..|",
        "..|       |         |..|",
        "..|       |         |..|",
        "..----?--------?-----..|",
        ".......................|",
        ".......................|",
        "-----------++----------|"
      ],
      "palettes": [
        "lab_palette", "lab_loot_generic"
      ],
      "terrain": {
        "?": [ "t_concrete_wall", "t_concrete_wall", "t_door_metal_c" ]
      },
      "mapping": {
        "t": {
          "items": [ { "item": "fridge", "chance": 30 } ]
        }
      },
      "place_nested": [
        { "chunks": [ "lab_spawn_7x7_crossdoors" ], "x": 5, "y": 3 },
        { "chunks": [ "lab_spawn_7x7_crossdoors" ], "x": 13, "y": 3 },
        { "chunks": [ "lab_spawn_7x7_crossdoors" ], "x": 3, "y": 13 },
        { "chunks": [ "lab_spawn_9x9_crossdoors" ], "x": 11, "y": 11 },
        { "chunks": [ "lab_border_walls" ], "x": 0, "y": 0 }
      ]
    }
  },
  {
    "type": "mapgen",
    "method": "json",
    "om_terrain": [ "lab_4side" ],
    "weight": 100,
    "object": {
      "rotation": [ 0, 3 ],
      "fill_ter": "t_rock_floor",
      "rows": [
        "........................",
        "........................",
        ".d.h.d...........d.h.d..",
        ".ddxdd...........ddxdd..",
        "........d.h.h.d.........",
        "........ddxd7dd.........",
        "........................",
        "........................",
        "........|-ggg-|.........",
        "........|r,,,r|.........",
        "........g,,?,,|-gg-|....",
        "........g,,/,,D....+....",
        "........|r,,,r|t-+-|....",
        "........|-ggg---|..||---",
        ".............|,,D..D,,,,",
        ".............|,,g..g,,,,",
        ".............|,,g..g,,,,",
        "--gg-+---|...|,,|..|,,,,",
        "......llS|...|--|..|----",
        ".c.......g...|,,D..D,,,,",
        ".c.......g...|,,g..g,,,,",
        ".c.Ccxc..|...|,,g..g,,,,",
        ".c.......|...|,,|.6|,,,,",
        ".........|...|,,|..|,,,,"
      ],
      "palettes": [
        "lab_palette", "lab_loot_generic"
      ],
      "furniture": {
        "?": "f_autodoc",
        "/": "f_autodoc_couch"
      },
      "terrain": {
        "C": "t_centrifuge",
        "?": "t_floor_blue",
        "/": "t_floor_blue",
        "7": "t_console",
        "r": "t_floor_blue"
      },
      "place_loot": [
        { "item": "anesthesia", "x": 15, "y": 12 }
      ],
      "mapping": {
        "r": {
          "items": [
            { "item": "dissection", "chance": 60 },
            { "item": "bionics_common", "chance": 10 },
            { "item": "mut_lab", "chance": 5 }
          ]
        }
      },
      "computers": {
        "6": {
          "name": "Operating Theatre Access Control", "security": 2, "options": [ { "name": "EMERGENCY EVAC - OPEN ALL DOORS", "action": "open", "security": 0 } ], "failures": [
            { "action": "damage" },
            { "action": "shutdown" }
          ]
        },
        "7": {
          "name": "Operating Theatre Access Control", "security": 2, "options": [ { "name": "UNLOCK AUTODOC DOOR", "action": "unlock", "security": 6 } ], "failures": [
            { "action": "damage" },
            { "action": "shutdown" }
          ]
        }
      },
      "place_monster": [
        { "monster": "mon_broken_cyborg", "x": [ 14, 15 ], "y": [ 14, 17 ], "chance": 90 },
        { "monster": "mon_broken_cyborg", "x": [ 14, 15 ], "y": [ 19, 22 ], "chance": 90 },
        { "monster": "mon_broken_cyborg", "x": [ 20, 22 ], "y": [ 14, 17 ], "chance": 90 },
        { "monster": "mon_broken_cyborg", "x": [ 20, 22 ], "y": [ 19, 22 ], "chance": 90 }
      ]
    }
  }
]
